<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Acompanhamento de Serviços - DOGE Construtora</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

  <!-- CSS -->
  <link rel="stylesheet" href="./assets/css/style.css" />

  <!-- (Opcional p/ compatibilidade ampla — iOS < 16.4, alguns Androids) -->
  <script async src="https://unpkg.com/es-module-shims@1.10.0/dist/es-module-shims.min.js"></script>

  <!-- Import map: usa Three.js em ESM e addons -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
      "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
    }
  }
  </script>
</head>
<body>
  <!-- Canvas 3D + overlay 2D -->
  <div id="app">
    <div id="cards2d"></div>
  </div>

  <!-- Modal nativo (acessível) -->
  <div id="doge-modal-backdrop" aria-hidden="true">
    <div id="doge-modal" role="dialog" aria-modal="true" aria-labelledby="doge-modal-title">
      <header>
        <h3 id="doge-modal-title">Detalhes do Apartamento</h3>
        <span class="pill" id="doge-modal-pill"></span>
        <button class="close" id="doge-modal-close" type="button" aria-label="Fechar">✕</button>
      </header>
      <div class="content" id="doge-modal-content"></div>
    </div>
  </div>

  <!-- Tooltip global -->
  <div id="doge-tip" role="tooltip" aria-hidden="true"></div>

  <!-- HUD (rodapé) -->
  <div id="hud">
    <!-- handle (toggle do HUD) -->
    <button id="btnHudSettings" class="hud-dot" title="Configurações" aria-label="Configurações"></button>
    <div class="row handle" id="hudHandle" title="Mostrar/ocultar">
      <div class="grabber" aria-hidden="true"></div>
    </div>

    <!-- 1ª linha: FVS + NC + 2D (+ Zoom 2D aparece só no modo 2D) -->
    <div class="row hud-row-1" id="row-fvs">
      <!-- Corte por pavimento -->

      <select id="fvsSelect" aria-label="Selecionar FVS">
        <option value="">Carregando...</option>
      </select>
      <button id="btnNC" type="button" title="Mostrar apenas NC" aria-pressed="false">NC</button>
<!-- Trecho relevante do HTML -->
<button id="btnInProgress" type="button" title="Ativar/Desativar modo Em Andamento" aria-label="Ativar/Desativar modo Em Andamento" aria-pressed="false">
  <span class="status-circle"></span>
</button>

      <button id="btn2D" class="mode2d" title="Alternar visualização 2D" aria-pressed="false">
        <svg viewBox="0 0 48 48" aria-hidden="true" focusable="false">
          <circle class="badge" cx="24" cy="24" r="20"></circle>
          <text class="label" x="24" y="29" text-anchor="middle">2D</text>
        </svg>
      </button>

      <!-- Zoom 2D (só visível no 2D) -->
      <button id="btnZoom2D" class="zoom2d" title="Zoom do grid 2D" aria-label="Zoom do grid 2D" style="display:none;">🔍−</button>
    </div>

    <!-- 2ª linha: sliders (compactos) + Reset -->
    <div class="row hud-row-2 nowrap" id="row-sliders">
      <!--<label for="opacity" title="Opacidade">🌫️</label>
      //<input id="opacity" type="range" min="0" max="100" value="100" class="slim" />-->
      <div class="floor-control">
        <button id="btnFloorUp" aria-label="Subir para o próximo pavimento">⬆️</button>
        <span id="floorDisplay">—</span>
        <button id="btnFloorDown" aria-label="Descer para o pavimento anterior">⬇️</button>
      </div>
      <div class="sliders">
      <label for="explodeXY" title="Explodir X">↔</label>
      <input id="explodeXY" type="range" min="0" max="4" step="0.01" value="0" class="slim" />
      
      <label for="explodeY" title="Explodir por piso (Y)">↑</label>
      <input id="explodeY" type="range" min="0" max="1.5" step="0.01" value="0" class="slim" />
      </div>
      <!-- Reset geral (volta tudo pro estado inicial) -->
      <button id="btnResetAll" title="Resetar visual" aria-label="Resetar visual">🔁</button>
    </div>
  </div>

  <!-- App (ES Modules) -->
  <script type="module" src="./assets/js/viewer.js"></script>
</body>
</html>
